Hoj图形化作业系统二次开发需求文档

项目背景与目标

我们要解决当前"教学"和"练习"两个系统数据不互通、学员体验割裂的问题。核心目标是基于现有的开源OJ系统(Hoj)进行二次开发，深度整合视频教学功能与图形化作业展示系统，打造一个集"学-练-评-讲"于一体的闭环式在线编程学习平台。

平台主要包含两个核心部分：
1. 视频教学平台：提供课程视频学习、教学内容管理和进度跟踪
2. OJ编程练习平台：提供在线编程题目练习、自动评测和代码提交
3. AI助教功能：作为两个平台的桥梁，提供智能问答和学习辅助

AIGC作品展示功能需求场景：每次课一个网页展示，网页可不断添加不同类型作品，学生登录按顺序上传保存自己用AI创作的各种类型作品在同一个网页并按上传顺序分别排列展示出来。每个作品类型（均需含标题、作者、作品说明）：文章、图片、视频、音乐、网页预览。

GitHub项目地址：https://github.com/HimitZH/HOJ

一、核心功能模块

模块一：AIGC作品管理

1. AIGC作品多媒体展示：支持学生上传AI生成的作品或创意作业，形式涵盖图片、音频、视频等多媒体内容。系统将以图文并茂的方式展示这些作品，丰富作业呈现形式，激发学生创造力和参与感。

2. 每课生成作品墙：平台可为每节课程自动生成"作品墙"，汇总展示本课学生提交的所有作品。作品墙以画廊形式呈现，方便师生在课后浏览交流优秀作业，营造互动分享的课堂氛围。每当完成一课的学习，学生的创作成果都会集中展现在作品墙上，既增强成就感，也便于教师点评讲解。

模块二：视频课程教学系统

1. 数据模型设计：
   - 课程(Course)：包含课程名称、简介、封面
   - 课次/章节(Lesson)：隶属于某个课程，每个课次有序号识别
   - 教学内容(Content)：隶属于某个课次，可以是视频或图文类型
   - 视频资源(VideoResource)：独立的视频文件管理，包含标题、文件ID、时长等，实现增删改查和上传功能。不允许前端访客下载，保护版权  -图片资源

2. 后台管理功能：
   - 课程管理：创建、搜索、编辑、删除课程；为课程添加和管理课次，为课次添加管理小节,支持排序；添加教学内容并关联OJ题目/题单
   - 视频库管理：统一的视频上传入口，支持分类分组；显示视频列表、时长、存储占用；支持删除替换；显示视频引用情况
   - 授权管理：支持按学生、课程、课次进行查询,批量或逐个授权/取消授权。按学生查询授权记录

3. 学员学习界面：
   - 我的课程：显示所有已授权课程列表
   - 课程详情页：树形结构展示课程-课次-教学内容目录
   - 学习页面：视频播放器支持播放控制和进度跟踪；下方显示课件内容；提供"前往练习"按钮跳转OJ题目

模块三：OJ题目系统与教学整合

1. 题目/题单关联教学内容：在题目详情页增加"查看视频讲解(知识回顾)"按钮，点击弹出窗口播放关联讲解视频，实现"练→讲→学"的回溯路径。仅付费用户可使用此功能。

2. 在线编程与评测：基于HOJ核心，支持代码编写、提交和自动评测，提供详细错误信息。

模块四：学员与班级授权管理系统

1. 数据模型：创建课程报名表，记录用户与课程的绑定关系；自动生成课次/课节访问记录，默认锁定状态。

2. 后台管理：
  ** - 学员管理：批量或单个添加/移除学员(课程，班级)**
   - 授权控制：实时控制每个学员对每一课次的访问权限
   - 便捷操作：支持按课程或课次一键全部开放/关闭
   - 查询学生作业列表完成情况
   - 判断题，选择题，代码阅读题（完型填空)
3. 学员界面：未授权课次直接不显示，避免权限混乱。

模块五：AI助教功能（结合视频平台和OJ平台）

核心理念：AI助教作为两个平台的桥梁，提供智能问答辅助，但不直接给出答案，而是给予提示和引导。当前阶段先预留功能位置，后续根据实际需求开发。

1. 功能定位：
   - 在视频学习页面：当学生观看教学视频遇到疑问时，可以通过悬浮窗口或侧边栏向AI提问，获取概念解释和学习提示
   - 在OJ练习页面：作为侧边栏工具，提供代码调试思路提示，不直接给出答案
   - 权限控制：付费用户可使用AI助教功能，免费用户仅能访问基础功能

2. 答案控制机制：
   - AI助教不能直接提供完整答案，只能给出解题思路和提示
   - 根据学生提交次数控制：提交3次后或时间间隔达到要求时，才允许查看答案
   - 提供"查看答案"按钮，结合系统判断条件控制显示权限
   - 答案查看后，AI仍可提供进一步的讲解和优化建议

3. 应用场景：
   - 视频学习辅助：解释概念、提供相关资料推荐
   - 编程练习指导：分析错误信息、给予调试提示、推荐算法思路
   - 学习陪伴：提供鼓励反馈、进度提醒、学习建议

4. 参考现有平台模式：
   - 借鉴掘金(Marscode)刷题的个性化推荐和错误诊断功能
   - 吸收学习通的智能答疑和资源推荐模式
   - 参考智慧树的AI导师陪伴式学习体验

模块六：能力测评与提分计划系统

1. 拍照上传试卷分析：学生可拍照上传线下测验或试卷，系统利用AI自动识别并分析答卷。针对错题和得分情况进行智能诊断，识别知识薄弱点。

2. 个性化学习建议：依据试卷分析结果，生成针对性的学习建议，如推荐相关练习题目、补充讲解资源。

3. 专属提分计划表：自动制定提分计划，以日历或清单形式展示后续提升步骤。计划可根据学习进度动态调整，教师可参与监督和修改。

模块七：学习记录与个人学习报告

1. 数据收集：
   - 视频观看进度和完成率
   - OJ题目提交次数、正确率、用时统计
   - AI助教使用频率和问题类型
   - 作品提交记录和教师反馈

2. 个人学习报告：
   - 学业成绩：考试成绩和平时作业得分
   - 课程参与度：视频观看比例、测验完成率
   - 练习表现：题目通过率、平均尝试次数、知识点掌握情况
   - AI使用情况：提问频率、问题类型分析
   - 发展趋势：成长轨迹图表、能力雷达图
   - AI评语与建议：个性化学习建议和改进方向

二、用户使用流程

学生视角：

1. 课程学习流程：
   - 登录后查看已授权课程列表
   - 按目录学习各章节内容，系统记录观看进度
   - 学习中可使用AI助教提问获取提示（付费功能）
   - 完成学习后点击"前往练习"进入OJ题目练习

2. 作品上传流程：
   - 按课程要求完成AI创作作品
   - 上传作品文件并填写说明
   - 作品自动发布到课程作品墙
   - 可浏览他人作品，获得灵感和反馈

3. 题目练习流程：
   - 在OJ页面编写代码并提交评测
   - 根据反馈调整代码，多次尝试
   - AI助教提供调试提示（不直接给答案）
   - 通过后可查看题解视频（付费功能）或选择查看答案（符合条件时）
   - 完成练习后查看个人统计数据

教师视角：
- 发布和管理课程内容
- 管理学员授权和班级
- 查看学习数据和个人报告
- 审核作品墙内容
- 监督AI助教使用情况

三、附加功能说明

1. 广告位统一展示：各页面预留统一广告/公告栏位，用于展示通知或推广信息。风格一致，集中管理，不干扰教学。

2. 版权保护：教学视频采用流媒体加密传输，禁止下载；播放画面叠,防范盗用。

3. 教师自主权：AI分析个人报告结果可由教师调整修改，保持教学的灵活性和专业判断。
